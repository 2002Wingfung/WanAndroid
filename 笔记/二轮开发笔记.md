# 二轮开发笔记

## 1 使用adb获取设备上的Log日志(Android调试桥) 

当用真机测试app崩溃了，且没有连接电脑，而这个bug很难复现的时候，可以使用该方法

* 1.下载，安装adb
* 2.针对这种情况，可使用命令：
* `adb logcat | find "XXX" >D:\myLog2.txt（示例）`
* 因为打印的信息一般很多，可以将`XXX`写成包名来找到刚才崩溃的app的信息 `>D:\myLog2.txt` , 打印到指定文件 
* 3.更多adb命令可以查看官网，博客，以及`adb logcat –help`命令

## 2 Android Studio中的调试功能

### 2.1 一些按钮

* F8 --> `step over` 一步一步走
* F7 --> `step into，force step into` 看到方法直接往里走
* `step out` 如果当前所在的方法里还有新点，则直接跳到下一个断点:如果没有，则跳出该方法
* `drop frame` 跳回到当前方法的开头
* `run to cursor` 跳到下一个断点

### 2.2 断点设置

#### 2.2.1 条件断点

`Java Line Breakpoints`

在condition里面可以设置对应的变量值

#### 2.2.2 异常断点

`Java Exception Breakpoints`

若调试时出现的异常，可以"保护现场"

---

## 3 代码命名规范

* 类与接口大驼峰

* 变量与方法小驼峰

* 接口的默认实现类的类名在接口后加Impl，如 Connector 与 ConnectorImpl

* 静态常量采用全部大写+下划线法

  ```java
  private static final int NETWORK_CONNECT_CODE = 200;
  ```

* 布尔类型变量**不加** is 前缀

  > 如果布尔类型变量加入 is 前缀，部分框架序列化可能会导致出现异常，同时也难以与 Kotlin 代码互调用

* 函数式接口添加函数式接口注解

  ```java
  @FunctionalInterface
  public interface ResultCallback {
      fun onGetResult(String result);
  }
  ```

  > 可有效减少匿名接口实现的代码量，并提高可读性

* 模块中的方法废弃时不应立即删除，而应添加 @Deprecated 注解并提供实现的新方法，提醒使用者换用新的实现方法

  > 避免更新后导致依赖该模块的代码出现问题

---

## 4 资源命名规范

下文中所提及的**模块指分包层面的模块**，module 将被标注为组件

### Layout

采用下划线法命名方式，格式为 **前缀 + 模块 + 说明**

前缀包括以下类型

- activity    activity 布局

- fragment    fragment 布局

- widget    自定义组件布局

- item    列表元素布局

- layout    其它类型布局

示例：

fragment_fliter.xml、

widget_progress_bar.xml、

item_music_history_list.xml

### Drawable

采用下划线法命名方式，格式为 **前缀 + 模块 + 说明**

前缀包括以下类型

- ic    图标

- bg    背景图

- img    图片

位图文件尽可能采用 webp 格式保存，降低空间占用

图标文件尽可能采用矢量图保存，避免放大失真

可复用的资源省略不需要加模块部分

示例：ic_back_arrow.xml、bg_home_forest.webp

### Menu

- 资源文件采用下划线法命名方式，格式为 **模块 + 说明**

  一个模块内有多个菜单资源需添加必要说明

  可复用的资源模块部分根据需要进行命名

  示例：playlist_toolbar.xml、playlist_item_operation.xml

- 菜单项采用下划线命名方式，格式为 **menu 前缀 + 资源文件名 + 说明**

  示例：menu_playlist_toolbar_play、menu_playlist_item_operation_play_next

### Animation

采用下划线法命名方式，格式为 **模块 + 功能 + 动画效果 + 方向**

示例：login_button_fade_in.xml

### String

该资源置于 values 中

特定资源采用下划线法命名方式，格式为 **模块 + 说明**

示例：app_name、message_channel_id

用于界面显示的资源因常被多模块复用，不再需要对功能或所在模块进行说明，采用下划线法命名方式，格式为 **内容概括**

示例：loading、list_empty_hint、show_details

### Color

该资源置于 values 中

采用下划线法命名方式，格式为 **模块 + 说明**

可复用的资源模块部分统一命名为 app

示例：app_primary、home_accent

### Style

该资源置于 values 中

采用 Pascal 命名方式，以类包名格式命名，格式为 **类型 + 模块 + 说明**

类型区分 Theme、Style、ShapeAppearance 等

可复用的资源模块部分根据需要进行命名，比如 Base

示例：Theme.Account.Toolbar、Style.PlaylistItem.Title

### Attribute

该资源置于 values 中

采用下划线法命名方式，格式为 **自定义控件 + 说明**

示例：circle_image_back_color、progress_bar_load_progress

如果多个自定义控件可复用，可独立出来，直接对属性进行说明，注意不与原有属性发生冲突

示例：back_color、load_progress

### Resource ID

采用下划线法命名方式，格式为 **类型 + 模块 + 说明**

类型为控件缩写，常用组件缩写如下表，其它组件团队内讨论确定

|  控件全称   | 缩写 |
| :---------: | :--: |
|   Button    | btn  |
|  TextView   |  tv  |
|  ListView   |  lv  |
| RecycleView |  rv  |
|  ImageView  |  iv  |
| ImageButton | ibtn |
|  EditText   | edt  |
|   Spinner   |  sp  |
|   Toolbar   |  tb  |
|  ViewPager  |  vp  |
|  TabLayout  | tab  |

示例：edt_login_password、iv_profile_avatar

### 资源文件分离

若需要对资源根据模块保存为多个文件，则资源文件采用下划线命名方式，格式为 **类型 + 模块**

示例：string_home.xml、color_playlist.xml、attr_progress_bar.xml

